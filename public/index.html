<!DOCTYPE html>
<html lang="en">
<head>
  <script type="module" src="/@vite/client"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EduPing</title>

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --red-900:#4a0000;
      --red-800:#700000;
      --red-700:#900404;
      --red-600:#b31616;
      --red-500:#d60b0b;
      --card:#ffffff;
      --ink:#1a1a1a;
      --muted:#666;
      --shadow: 0 10px 25px rgba(0,0,0,.25);
      --radius: 16px;
      --maxw: 760px;
    }

    *{ box-sizing:border-box; margin:0; padding:0; }
    html,body{ height:100%; font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; }

    body{
      color:#fff;
      background:
        radial-gradient(1000px 500px at 50% -150px, rgba(255,255,255,.25), transparent 60%),
        radial-gradient(700px 450px at 75% 20%, rgba(255,255,255,.12), transparent 55%),
        linear-gradient(180deg, var(--red-900), var(--red-500) 40%, var(--red-900));
      overflow-x:hidden;
    }

    /* Shared */
    .container{ width: calc(100% - 24px); max-width: var(--maxw); margin: 0 auto; }
    .hidden{ display:none !important; }

    /* ===== LOGIN ===== */
    #loginScreen{
      position:fixed; inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 24px 12px;
      z-index:9999;
    }

    .loginWrap{
      width: min(420px, 100%);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 14px;
    }

    .logoMark{
      font-weight:900;
      font-size: 56px;
      letter-spacing: -1px;
      color:#fff;
      text-shadow: 0 10px 25px rgba(0,0,0,.45);
      transform: rotate(-6deg);
      user-select:none;
    }
    .logoMark .bang{
      color:#fff;
      display:inline-block;
      margin-left: 2px;
      text-shadow: 0 10px 25px rgba(0,0,0,.45);
    }
    .logoImg{
      width: 110px;       /* adjust as needed */
      height: auto;
      display: block;
      filter: drop-shadow(0 10px 25px rgba(0,0,0,.45));
      user-select: none;
    }

    #loginForm{
      width: 100%;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 22px;
      box-shadow: var(--shadow);
      padding: 22px 18px 18px;
      backdrop-filter: blur(8px);
    }

    #loginForm h2{
      text-align:center;
      color:#fff;
      font-size: 22px;
      margin-bottom: 16px;
      letter-spacing: .2px;
    }

    #loginError{
      display:none;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.2);
      color:#fff;
      padding: 10px 12px;
      border-radius: 12px;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .field{
      width: 100%;
      background: rgba(255,255,255,.92);
      border-radius: 12px;
      border: 0;
      outline: none;
      padding: 14px 14px;
      font-size: 16px;
      margin-bottom: 12px;
      color:#111;
    }

    .btnRow{
      display:flex;
      gap: 10px;
      margin-top: 6px;
    }

    .btn{
      flex:1;
      border:0;
      cursor:pointer;
      border-radius: 999px;
      padding: 11px 12px;
      font-weight: 700;
      color:#fff;
      background: linear-gradient(135deg, var(--red-500), var(--red-700));
      box-shadow: 0 10px 20px rgba(0,0,0,.25);
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:active{ transform: translateY(1px); filter: brightness(.98); }
    .btn.secondary{
      background: rgba(255,255,255,.16);
      border: 1px solid rgba(255,255,255,.22);
      box-shadow: none;
    }

    /* ===== MAIN APP ===== */
    #mainApp{
      display:none;
      min-height: 100vh;
      padding-bottom: 24px;
    }

    header{
      position: sticky;
      top:0;
      z-index: 50;
      padding: 14px 0 10px;
      background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,0));
      backdrop-filter: blur(6px);
    }

    .headerRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }

    .appTitle{
      text-align:center;
      font-weight: 800;
      letter-spacing:.4px;
      font-size: 20px;
      flex:1;
      user-select:none;
    }

    .iconBtn{
      width: 40px;
      height: 40px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.20);
      color:#fff;
      cursor:pointer;
      display:grid;
      place-items:center;
      transition: transform .12s ease, background .12s ease;
    }
    .iconBtn:hover{ background: rgba(0,0,0,.28); }
    .iconBtn:active{ transform: translateY(1px); }

    .searchBar{
      margin-top: 10px;
      width: 100%;
      background: rgba(255,255,255,.95);
      border-radius: 12px;
      border: 0;
      outline:none;
      padding: 12px 14px;
      font-size: 15px;
      color:#111;
    }

    /* Top icon nav */
    .topNav{
      margin-top: 10px;
      display:flex;
      gap: 10px;
      padding: 10px;
      border-radius: 16px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(8px);
      overflow:auto;
    }
    .topNav button{
      min-width: 54px;
      height: 46px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.15);
      background: rgba(255,255,255,.08);
      color:#fff;
      cursor:pointer;
      display:grid;
      place-items:center;
      font-size: 18px;
      transition: transform .12s ease, background .12s ease;
      flex: 0 0 auto;
    }
    .topNav button:hover{ background: rgba(255,255,255,.14); }
    .topNav button:active{ transform: translateY(1px); }
    .topNav button.active{
      background: rgba(255,255,255,.22);
      border-color: rgba(255,255,255,.25);
    }

    /* Sections */
    main{ padding-top: 10px; }
    section{
      display:none;
      margin-top: 12px;
    }
    section.active{ display:block; }

    .panel{
      background: rgba(255,255,255,.95);
      color: var(--ink);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
    }

    /* ===== Announcements feed ===== */
    .feed{
      display:flex;
      flex-direction:column;
      gap: 12px;
    }

    .feedCard{
      border-radius: 18px;
      overflow:hidden;
      background: #fff;
      box-shadow: 0 10px 20px rgba(0,0,0,.16);
      border: 1px solid rgba(0,0,0,.06);
    }

    .feedTop{
      display:flex;
      gap: 12px;
      align-items:center;
      padding: 12px 12px 10px;
      background: linear-gradient(180deg, rgba(214,11,11,.10), transparent);
    }

    .avatarRing{
      width: 44px; height:44px;
      border-radius: 999px;
      padding: 2px;
      background: linear-gradient(135deg, var(--red-500), #ff6a6a);
      flex: 0 0 auto;
    }
    .avatarRing img{
      width:100%; height:100%;
      border-radius: 999px;
      object-fit: cover;
      display:block;
      background:#fff;
    }

    .feedMeta .who{
      font-weight: 800;
      color: var(--red-500);
      line-height: 1.1;
    }
    .feedMeta .when{
      font-size: 12px;
      color: #777;
      margin-top: 2px;
    }

    .feedBody{
      padding: 0 12px 12px;
      color:#222;
      line-height:1.35;
      font-size: 14.5px;
    }

    .feedMedia{
      margin-top: 10px;
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid rgba(0,0,0,.08);
      background:#f3f3f3;
    }
    .feedMedia img{
      width:100%;
      display:block;
      height: 180px;
      object-fit: cover;
    }

    .feedActions{
      display:flex;
      gap: 10px;
      padding: 12px;
      border-top: 1px solid rgba(0,0,0,.06);
    }

    .pill{
      border:0;
      border-radius: 999px;
      padding: 10px 14px;
      font-weight: 800;
      cursor:pointer;
      background: linear-gradient(135deg, var(--red-500), var(--red-700));
      color:#fff;
      flex: 0 0 auto;
    }

    .pill.ghost{
      background: rgba(214,11,11,.10);
      color: var(--red-500);
      border: 1px solid rgba(214,11,11,.25);
      font-weight: 800;
    }

    /* ===== Calendar ===== */
    .calendarTitle{
      color:#fff;
      font-size: 44px;
      font-weight: 300;
      letter-spacing: .6px;
      margin: 6px 0 10px;
    }
    .calGrid{
      display:grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 1px;
      background: rgba(255,255,255,.25);
      border-radius: 16px;
      overflow:hidden;
      box-shadow: var(--shadow);
    }
    .calCell{
      background: rgba(0,0,0,.65);
      color:#fff;
      min-height: 44px;
      padding: 10px;
      font-weight: 700;
      font-size: 13px;
    }
    .calHead{
      background: rgba(0,0,0,.82);
      font-weight: 800;
      text-align:center;
    }
    .calDay{
      background: rgba(0,0,0,.45);
      font-weight: 700;
    }
    .calBlank{ background: rgba(0,0,0,.22); }

    /* ===== Profile ===== */
    .profileWrap{
      text-align:center;
      padding: 16px 10px 6px;
    }
    .profileAvatar{
      width: 110px; height:110px;
      border-radius: 999px;
      margin: 6px auto 10px;
      border: 4px solid var(--red-500);
      overflow:hidden;
      box-shadow: 0 10px 20px rgba(0,0,0,.25);
      background:#fff;
    }
    .profileAvatar img{ width:100%; height:100%; object-fit:cover; display:block; }
    .profileName{
      font-weight: 900;
      font-size: 22px;
      color: var(--red-500);
    }
    .profileHandle{
      color:#777;
      font-size: 13px;
      margin-top: 2px;
    }
    .form{
      margin-top: 14px;
      text-align:left;
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .form label{ font-weight: 800; font-size: 13px; color:#333; }
    .form input{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.14);
      outline:none;
      font-size: 15px;
    }
    .saveBtn{
      margin-top: 10px;
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border:0;
      cursor:pointer;
      font-weight: 900;
      color:#fff;
      background: linear-gradient(135deg, var(--red-500), var(--red-700));
    }

    /* ===== Forums ===== */
    .forumComposer{
      display:flex;
      gap: 10px;
      align-items:center;
    }
    .forumComposer input{
      flex:1;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.14);
      outline:none;
      font-size: 15px;
    }
    .forumComposer button{
      border:0;
      border-radius: 12px;
      padding: 12px 14px;
      cursor:pointer;
      font-weight: 900;
      color:#fff;
      background: linear-gradient(135deg, var(--red-500), var(--red-700));
    }

    #forumPosts{ margin-top: 12px; display:flex; flex-direction:column; gap: 12px; }

    .forum-post{
      background: #fff;
      color: #111;
      border-radius: 16px;
      box-shadow: 0 10px 20px rgba(0,0,0,.12);
      border: 1px solid rgba(0,0,0,.06);
      padding: 12px;
    }
    .forum-post-header{ display:flex; align-items:center; gap: 10px; margin-bottom: 10px; }
    .forum-post-header img{
      width: 40px; height:40px;
      border-radius: 999px;
      object-fit:cover;
      border: 2px solid rgba(214,11,11,.6);
    }
    .forum-post-header .username{ font-weight: 900; color: var(--red-500); }
    .forum-post-content{ white-space: pre-wrap; line-height:1.35; color:#222; }

    .comments-section{ margin-top: 10px; }
    .comment-list div{
      background: #f2f2f2;
      border-radius: 12px;
      padding: 8px 10px;
      margin-bottom: 8px;
      font-size: 13.5px;
      color:#222;
    }
    .comment-input-div{ display:flex; gap: 8px; }
    .comment-input-div input{
      flex:1;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.14);
      outline:none;
    }
    .comment-input-div button{
      border:0;
      border-radius: 12px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 900;
      color:#fff;
      background: linear-gradient(135deg, var(--red-500), var(--red-700));
    }
  </style>
</head>

<body>
  <!-- LOGIN -->
  <div id="loginScreen">
    <div class="loginWrap">
      <!-- <div class="logoMark">E<span class="bang">!</span></div> -->
	<img
  class="logoImg"
  src="https://cdn.discordapp.com/attachments/1460556338194284599/1474132938177249340/Untitled8_20260220035739.png?ex=6998bcc8&is=69976b48&hm=08965a325763c69d6cc0e91af3c25f19fa77eabe2dda6c5da43f5ba237a1ca3c&"
  alt="EduPing Logo"
/>
	

      <form id="loginForm" onsubmit="handleLogin(event)">
        <h2>EduPing</h2>
        <div id="loginError"></div>

        <input class="field" type="email" id="loginEmail" placeholder="Email" autocomplete="username" required />
        <input class="field" type="password" id="loginPassword" placeholder="Password" autocomplete="current-password" required />

        <div class="btnRow">
          <button class="btn" type="submit">Login</button>
          <button class="btn secondary" type="button" onclick="handleSignup()">Sign Up</button>
        </div>
      </form>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="mainApp">
    <header>
      <div class="container">
        <div class="headerRow">
          <button class="iconBtn" title="Help">
            <i class="fa-solid fa-headset"></i>
          </button>

          <div class="appTitle">EduPing</div>

          <button class="iconBtn" title="Search" onclick="focusSearch()">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </div>

        <input id="searchBar" class="searchBar" type="text" placeholder="Search..." oninput="handleSearch(this.value)" />

        <nav class="topNav" aria-label="Main navigation">
          <button id="navAnnouncements" class="active" onclick="showSection('announcements')" title="Announcements">
            <i class="fa-solid fa-bullhorn"></i>
          </button>
          <button id="navCalendar" onclick="showSection('calendar')" title="Calendar">
            <i class="fa-solid fa-calendar-days"></i>
          </button>
          <button id="navForums" onclick="showSection('forums')" title="Forums">
            <i class="fa-solid fa-comments"></i>
          </button>
          <button id="navProfile" onclick="showSection('profile')" title="Profile">
            <i class="fa-solid fa-user"></i>
          </button>
          <button onclick="logout()" title="Logout">
            <i class="fa-solid fa-right-from-bracket"></i>
          </button>
        </nav>
      </div>
    </header>

    <main class="container">
      <!-- ANNOUNCEMENTS -->
      <section id="announcements" class="active">
        <div class="feed" id="announcementFeed"></div>
      </section>

      <!-- CALENDAR -->
      <section id="calendar">
        <div class="calendarTitle">February 2026</div>
        <div id="calendarGrid" class="calGrid"></div>
      </section>

      <!-- FORUMS -->
      <section id="forums">
        <div class="panel">
          <h2 style="text-align:center; margin-bottom: 12px;">Ask Questions / Forum</h2>

          <div class="forumComposer">
            <input type="text" id="forumInput" placeholder="Type your question..." />
            <button onclick="addForumPost()">Post</button>
          </div>

          <div id="forumPosts"></div>
        </div>
      </section>

      <!-- PROFILE -->
      <section id="profile">
        <div class="panel">
          <div class="profileWrap">
            <div class="profileAvatar">
              <img id="profilePic" src="https://i.pravatar.cc/150?img=12" alt="Profile Picture" />
            </div>
            <div id="profileName" class="profileName">Alex Parker</div>
            <div id="profileUsername" class="profileHandle">@alex.parker@sbu.edu.ph</div>

            <form class="form" onsubmit="saveProfile(event)">
              <label for="nameInput">Name:</label>
              <input type="text" id="nameInput" value="Alex Parker" />

              <label for="contactInput">Contact:</label>
              <input type="text" id="contactInput" value="alex.parker@sbu.edu.ph" />

              <button class="saveBtn" type="submit">Save</button>
            </form>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    let currentUserEmail = null;

    const blockedWords = ["badword1", "foulword", "inappropriate"];

    const sampleAnnouncements = [
      {
        org: "OPSA",
        when: "Advisory",
        text:
          "The Office of the President has announced that all office work and classes will be suspended on February 25, 2026 due to the 40th anniversary of EDSA People Power Revolution.\n\nFor your information and guidance.",
        img: "https://images.unsplash.com/photo-1523240795612-9a054b0db644?auto=format&fit=crop&w=1200&q=60",
        joinable: false,
      },
      {
        org: "Almoneda Beda Parents and Alumni",
        when: "Zoom Event",
        text:
          "Raising Healthy Children and Safe Kids: Learn practical strategies with our featured speaker.\n\nJoin us for an interactive session.",
        img: "https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=1200&q=60",
        joinable: true,
      },
      {
        org: "San Beda University - Rizal",
        when: "News",
        text:
          "Campus updates: new academic programs approved starting next school year, and a campus-wide energy conservation campaign launched.",
        img: "https://images.unsplash.com/photo-1523050854058-8df90110c9f1?auto=format&fit=crop&w=1200&q=60",
        joinable: false,
      }
    ];

    function setError(msg){
      const errorDiv = document.getElementById("loginError");
      if (!msg){
        errorDiv.style.display = "none";
        errorDiv.textContent = "";
        return;
      }
      errorDiv.style.display = "block";
      errorDiv.textContent = msg;
    }

    function handleSignup(){
      alert("Sign Up is a UI placeholder (no backend yet). If you want, I can add localStorage signup.");
    }

    function handleLogin(e) {
      e.preventDefault();

      const email = document.getElementById("loginEmail").value.trim();
      const password = document.getElementById("loginPassword").value.trim();

      if (!email || !password){
        setError("Please enter both email and password.");
        return;
      }

      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)){
        setError("Please enter a valid email address.");
        return;
      }

      setError(null);

      currentUserEmail = email;

      document.getElementById("loginScreen").classList.add("hidden");
      document.getElementById("mainApp").style.display = "block";

      initializeUserUI();
      showSection("announcements");
    }

    function logout(){
      currentUserEmail = null;

      document.getElementById("mainApp").style.display = "none";
      document.getElementById("loginScreen").classList.remove("hidden");

      document.getElementById("loginEmail").value = "";
      document.getElementById("loginPassword").value = "";
      setError(null);

      // Reset profile
      document.getElementById("profileName").textContent = "Alex Parker";
      document.getElementById("profileUsername").textContent = "@alex.parker@sbu.edu.ph";
      document.getElementById("nameInput").value = "Alex Parker";
      document.getElementById("contactInput").value = "alex.parker@sbu.edu.ph";

      // Reset forum
      document.getElementById("forumPosts").innerHTML = "";
      document.getElementById("forumInput").value = "";

      // Reset announcements feed
      document.getElementById("announcementFeed").innerHTML = "";
      document.getElementById("searchBar").value = "";
    }

    function initializeUserUI(){
      // Profile
      document.getElementById("profileUsername").textContent = "@" + currentUserEmail;
      document.getElementById("contactInput").value = currentUserEmail;

      let defaultName = currentUserEmail.split("@")[0].replace(/\./g, " ");
      defaultName = defaultName.split(" ").map(s => s ? (s[0].toUpperCase() + s.slice(1)) : s).join(" ").trim();

      const nameInput = document.getElementById("nameInput");
      if (!nameInput.value || nameInput.value === "Alex Parker"){
        nameInput.value = defaultName || "Student";
      }
      document.getElementById("profileName").textContent = nameInput.value;

      // Forum
      document.getElementById("forumPosts").innerHTML = "";
      createPost("PhysicsGuy123",
        "Hey, can someone help me understand how to solve this physics problem? It’s about projectile motion and I’m stuck!",
        true
      );

      // Announcements feed
      renderAnnouncements(sampleAnnouncements);

      // Calendar Feb 2026
      renderCalendar(2026, 1);
    }

    function focusSearch(){
      document.getElementById("searchBar").focus();
    }

    function showSection(sectionId){
      document.querySelectorAll("section").forEach(sec => sec.classList.toggle("active", sec.id === sectionId));

      // nav active highlight
      const map = {
        announcements: "navAnnouncements",
        calendar: "navCalendar",
        forums: "navForums",
        profile: "navProfile",
      };
      Object.values(map).forEach(id => document.getElementById(id)?.classList.remove("active"));
      if (map[sectionId]) document.getElementById(map[sectionId]).classList.add("active");
    }

    function saveProfile(e){
      e.preventDefault();
      const newName = document.getElementById("nameInput").value.trim();
      if (!newName) { alert("Name cannot be empty"); return; }
      document.getElementById("profileName").textContent = newName;
      alert(`Profile saved: ${newName}`);
    }

    /* ===== Announcements feed ===== */
    function renderAnnouncements(items){
      const feed = document.getElementById("announcementFeed");
      feed.innerHTML = "";

      items.forEach((a, idx) => {
        const card = document.createElement("div");
        card.className = "feedCard";

        card.innerHTML = `
          <div class="feedTop">
            <div class="avatarRing">
              <img alt="${escapeHtml(a.org)} logo" src="https://upload.wikimedia.org/wikipedia/en/a/a4/San_Beda_University_Logo.svg">
            </div>
            <div class="feedMeta">
              <div class="who">${escapeHtml(a.org)}</div>
              <div class="when">${escapeHtml(a.when)}</div>
            </div>
          </div>

          <div class="feedBody">
            <div>${escapeHtml(a.text).replaceAll("\\n","<br>")}</div>
            <div class="feedMedia">
              <img alt="announcement image ${idx+1}" src="${a.img}">
            </div>
          </div>

          <div class="feedActions">
            ${a.joinable ? `<button class="pill" onclick="joinEvent(${idx})">I'm Joining!</button>` : ""}
            <button class="pill ghost" onclick="alert('Saved (demo).')">Save</button>
          </div>
        `;

        feed.appendChild(card);
      });
    }

    function joinEvent(idx){
      alert("You joined (demo). If you want, I can persist this via localStorage.");
    }

    function handleSearch(q){
      q = (q || "").trim().toLowerCase();
      if (!q){
        renderAnnouncements(sampleAnnouncements);
        return;
      }
      const filtered = sampleAnnouncements.filter(a =>
        a.org.toLowerCase().includes(q) ||
        a.when.toLowerCase().includes(q) ||
        a.text.toLowerCase().includes(q)
      );
      renderAnnouncements(filtered);
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    /* ===== Calendar ===== */
    function renderCalendar(year, monthIndex){
      const grid = document.getElementById("calendarGrid");
      const days = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
      const first = new Date(year, monthIndex, 1);
      const last = new Date(year, monthIndex + 1, 0);

      const startDay = first.getDay(); // 0 Sunday
      const totalDays = last.getDate();

      grid.innerHTML = "";

      // headers
      for (const d of days){
        const cell = document.createElement("div");
        cell.className = "calCell calHead";
        cell.textContent = d;
        grid.appendChild(cell);
      }

      // blanks before day 1
      for (let i=0; i<startDay; i++){
        const cell = document.createElement("div");
        cell.className = "calCell calBlank";
        cell.textContent = "";
        grid.appendChild(cell);
      }

      // days
      for (let day=1; day<=totalDays; day++){
        const cell = document.createElement("div");
        cell.className = "calCell calDay";
        cell.textContent = String(day);
        grid.appendChild(cell);
      }
    }

    /* ===== Forums ===== */
    function containsBlocked(text){
      const low = text.toLowerCase();
      return blockedWords.some(bw => low.includes(bw));
    }

    function addForumPost(){
      const input = document.getElementById("forumInput");
      const text = input.value.trim();
      if (!text) return;

      if (containsBlocked(text)){
        alert("Your post contains inappropriate language!");
        return;
      }

      createPost(currentUserEmail || "You", text);
      input.value = "";
    }

    function createPost(username, text, isSample = false){
      const postsContainer = document.getElementById("forumPosts");

      const post = document.createElement("div");
      post.className = "forum-post";

      const header = document.createElement("div");
      header.className = "forum-post-header";

      const avatar = document.createElement("img");
      avatar.src = "https://i.pravatar.cc/50?u=" + encodeURIComponent(isSample ? "physics_guy" : username);
      avatar.alt = username + " avatar";

      const nameSpan = document.createElement("span");
      nameSpan.className = "username";
      nameSpan.textContent = username;

      header.appendChild(avatar);
      header.appendChild(nameSpan);

      const content = document.createElement("p");
      content.className = "forum-post-content";
      content.textContent = text;

      const commentsSection = document.createElement("div");
      commentsSection.className = "comments-section";

      const commentList = document.createElement("div");
      commentList.className = "comment-list";

      const commentInputDiv = document.createElement("div");
      commentInputDiv.className = "comment-input-div";

      const commentInput = document.createElement("input");
      commentInput.type = "text";
      commentInput.placeholder = "Write a comment...";

      const commentBtn = document.createElement("button");
      commentBtn.textContent = "Comment";
      commentBtn.onclick = () => {
        const commentText = commentInput.value.trim();
        if (!commentText) return;

        if (containsBlocked(commentText)){
          alert("Your comment contains inappropriate language!");
          commentInput.value = "";
          return;
        }

        const comment = document.createElement("div");
        comment.textContent = `${currentUserEmail || "You"}: ${commentText}`;
        commentList.appendChild(comment);
        commentInput.value = "";
      };

      commentInputDiv.appendChild(commentInput);
      commentInputDiv.appendChild(commentBtn);

      commentsSection.appendChild(commentList);
      commentsSection.appendChild(commentInputDiv);

      post.appendChild(header);
      post.appendChild(content);
      post.appendChild(commentsSection);

      postsContainer.prepend(post);
    }

    // initial state
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("mainApp").style.display = "none";
      document.getElementById("loginScreen").classList.remove("hidden");
    });
  </script>
</body>
</html>